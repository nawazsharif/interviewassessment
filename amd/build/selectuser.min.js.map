{"version":3,"sources":["../src/selectuser.js"],"names":["define","$","notification","ajax","init","document","ready","on","userid","val","html","hasClass","addClass","alert","cmid","render_result","generate_rating_star","stars","htm","i","call","methodname","args","done","data","result","length","forEach","item","name","grade","removeClass","render_criteria","fail","exception","e","id","addNotification","message","type"],"mappings":"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","sourcesContent":["define(['jquery', 'core/notification', 'core/ajax'], function ($, notification, ajax) {\n    return {\n        init: function () {\n            $(document).ready(function () {\n                $('#select_user').on('change', function () {\n                    var userid = $('#select_user').val();\n                    if (!userid){\n                        $('#user_rating').html('');\n                        $('#criteria_render').html('');\n                        if ($('#select_user_result option:selected')){\n                            $('#select_user_result').val(\"\");\n                        }\n                        if(!$('#all_result_render').hasClass('d-none')){\n                            $('#all_result_render').addClass('d-none');\n                        }\n                        alert('Please select a valid user to show data');\n                    }\n                    else {\n                        var cmid = $('#courseid').val();\n                        $('#user_rating').html('');\n                        if(!$('#all_result_render').hasClass('d-none')){\n                            $('#all_result_render').addClass('d-none');\n                        }\n                        if ($('#select_user_result option:selected')){\n                            $('#select_user_result').val(\"\");\n                        }\n                        $('#criteria_render').html('');\n                        render_result(userid, cmid);\n                    }\n\n                });\n            });\n            function generate_rating_star(stars) {\n                var htm = '';\n                for (var i = 0; i < stars; i++) {\n                    htm += '<svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">' +\n                        '<path d=\"M3.58266 18.5634C3.48541 19.1178 4.03237 19.5517 4.51542 19.3034L10.002 16.4835L15.4885 19.3034C15.9715 19.5517 16.5185 19.1178 16.4212 18.5634L15.3841 12.6516L19.787 8.45578C20.1985 8.06366 19.9855 7.34671 19.4342 7.2684L13.3111 6.39856L10.581 0.990381C10.3351 0.503206 9.66885 0.503206 9.42291 0.990381L6.69276 6.39856L0.569668 7.2684C0.0184315 7.34671 -0.194569 8.06366 0.216907 8.45578L4.61982 12.6516L3.58266 18.5634ZM9.71342 15.1033L5.10623 17.4712L5.97405 12.5246C6.01495 12.2915 5.93803 12.0527 5.77061 11.8931L2.13706 8.4305L7.20245 7.71092C7.41184 7.68117 7.59468 7.54743 7.69346 7.35176L10.002 2.77884L12.3104 7.35176C12.4092 7.54743 12.5921 7.68117 12.8015 7.71092L17.8668 8.4305L14.2333 11.8931C14.0659 12.0527 13.989 12.2915 14.0299 12.5246L14.8977 17.4712L10.2905 15.1033C10.1085 15.0097 9.89541 15.0097 9.71342 15.1033Z\" fill=\"#9CA4B6\"/>' +\n                        '</svg>';\n                }\n                return htm;\n            }\n            function render_result(userid, cmid) {\n\n                var wsfunction = 'interview_assessment_select_user';\n                var params = {\n                    'cmid': cmid,\n                    'userid': userid\n                };\n\n                var request = {\n                    methodname: wsfunction,\n                    args: params\n                };\n\n                try {\n                    ajax.call([request])[0].done(function (data) {\n\n                        var html = '';\n\n                        if (data.result.length > 0) {\n\n                            data.result.forEach(function (item) {\n                                html += '<div class=\"col-md-4\">\\n' +\n                                    '            <div class=\"rating\">\\n' +\n                                    '                <label for=\"\">'+item.name+'</label>\\n' + generate_rating_star(item.grade) +\n                                    '            </div>\\n' +\n                                    '        </div>';\n\n                            });\n                            if(!$('#assessment_form').hasClass('d-none')){\n                                $('#assessment_form').addClass('d-none');\n                            }\n                            $('#user_rating').removeClass('d-none');\n                            $('#user_rating').html(html);\n\n                        } else {\n                            render_criteria(cmid, userid);\n                        }\n                    }).fail(notification.exception);\n                } catch (e) {\n                    return false;\n                }\n\n            }\n\n            function render_criteria(cmid, userid) {\n                var wsfunction = 'get_all_criteria';\n                var params = {\n                    'cmid': cmid,\n                    'userid': userid,\n                };\n\n                var request = {\n                    methodname: wsfunction,\n                    args: params\n                };\n\n                try {\n                    ajax.call([request])[0].done(function (data) {\n\n                        var html = '';\n                        $('#assessment_form').removeClass('d-none');\n                        if (data.result.length > 0) {\n                            html += '<input type=\"hidden\" name=\"userid\" id=\"userid\" value=\"' + data.userid + '\">';\n                            data.result.forEach(function (item, index) {\n\n                                html += '<div id=\"' + item.id + '\" class=\"rating-css m-2\" >' +\n                                    '                <div>' + item.name + '</div>' +\n                                    '                <div class=\"star-icon\">' +\n                                    '                    <input type=\"radio\" checked name=\"rating[' + item.id + ']\" value=\"1\" id=\"rating1_' + item.id + '\">' +\n                                    '                    <label for=\"rating1_' + item.id + '\" class=\"fa fa-star\"></label>' +\n                                    '                    <input type=\"radio\" name=\"rating[' + item.id + ']\" value=\"2\" id=\"rating2_' + item.id + '\">' +\n                                    '                    <label for=\"rating2_' + item.id + '\" class=\"fa fa-star\"></label>' +\n                                    '                    <input type=\"radio\" name=\"rating[' + item.id + ']\" value=\"3\" id=\"rating3_' + item.id + '\">' +\n                                    '                    <label for=\"rating3_' + item.id + '\" class=\"fa fa-star\"></label>' +\n                                    '                    <input type=\"radio\" name=\"rating[' + item.id + ']\" value=\"4\" id=\"rating4_' + item.id + '\">' +\n                                    '                    <label for=\"rating4_' + item.id + '\" class=\"fa fa-star\"></label>' +\n                                    '                    <input type=\"radio\"  name=\"rating[' + item.id + ']\" value=\"5\" id=\"rating5_' + item.id + '\">' +\n                                    '                    <label for=\"rating5_' + item.id + '\" class=\"fa fa-star\"></label>' +\n                                    '                </div>' +\n                                    '            </div>';\n                            });\n                            // html+='<div class=\"text-center\"><button name=\"assessment_submit\" class=\"btn btn-primary\" value=\"assessment_submit\">Assessment Submit</button></div>';\n                            $('#criteria_render').html(html);\n\n                            return html;\n                        } else {\n                            notification.addNotification({\n                                message: 'No Criteria Found',\n                                type: 'error'\n                            });\n                        }\n                    }).fail(notification.exception);\n                } catch (e) {\n                }\n\n            }\n        }\n\n    };\n});"],"file":"selectuser.min.js"}