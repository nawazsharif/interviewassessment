{"version":3,"sources":["../src/userresult.js"],"names":["define","$","notification","ajax","init","document","ready","on","userid","val","html","hasClass","addClass","alert","removeClass","cmid","render_result","generate_rating_star","stars","htm","i","call","methodname","args","done","data","result","console","log","interviewers","reviews","forEach","interviewer","firstname","review","interviewer_id","name","grade","addNotification","message","type","fail","exception","e"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,WAAhC,CAAD,CAA+C,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAiC,CAClF,MAAO,CACHC,IAAI,CAAE,eAAY,CACdH,CAAC,CAACI,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAY,CAC1BL,CAAC,CAAC,qBAAD,CAAD,CAAyBM,EAAzB,CAA4B,QAA5B,CAAsC,UAAY,CAC9C,GAAIC,CAAAA,CAAM,CAAGP,CAAC,CAAC,qBAAD,CAAD,CAAyBQ,GAAzB,EAAb,CACA,GAAI,CAACD,CAAL,CAAY,CACRP,CAAC,CAAC,cAAD,CAAD,CAAkBS,IAAlB,CAAuB,EAAvB,EACAT,CAAC,CAAC,kBAAD,CAAD,CAAsBS,IAAtB,CAA2B,EAA3B,EACAT,CAAC,CAAC,oBAAD,CAAD,CAAwBS,IAAxB,CAA6B,EAA7B,EAEA,GAAG,CAACT,CAAC,CAAC,kBAAD,CAAD,CAAsBU,QAAtB,CAA+B,QAA/B,CAAJ,CAA6C,CACzCV,CAAC,CAAC,kBAAD,CAAD,CAAsBW,QAAtB,CAA+B,QAA/B,CACH,CACD,GAAIX,CAAC,CAAC,8BAAD,CAAL,CAAsC,CAClCA,CAAC,CAAC,cAAD,CAAD,CAAkBQ,GAAlB,CAAsB,EAAtB,CACH,CACDI,KAAK,CAAC,yCAAD,CACR,CAZD,IAaK,CACD,GAAG,CAACZ,CAAC,CAAC,kBAAD,CAAD,CAAsBU,QAAtB,CAA+B,QAA/B,CAAJ,CAA6C,CACzCV,CAAC,CAAC,kBAAD,CAAD,CAAsBW,QAAtB,CAA+B,QAA/B,CAEH,CACDX,CAAC,CAAC,oBAAD,CAAD,CAAwBa,WAAxB,CAAoC,QAApC,EAEA,GAAIb,CAAC,CAAC,8BAAD,CAAL,CAAsC,CAClCA,CAAC,CAAC,cAAD,CAAD,CAAkBQ,GAAlB,CAAsB,EAAtB,CACH,CACD,GAAIM,CAAAA,CAAI,CAAGd,CAAC,CAAC,WAAD,CAAD,CAAeQ,GAAf,EAAX,CACAR,CAAC,CAAC,cAAD,CAAD,CAAkBS,IAAlB,CAAuB,EAAvB,EACAT,CAAC,CAAC,kBAAD,CAAD,CAAsBS,IAAtB,CAA2B,EAA3B,EAEAT,CAAC,CAAC,oBAAD,CAAD,CAAwBS,IAAxB,CAA6B,EAA7B,EACAM,CAAa,CAACR,CAAD,CAASO,CAAT,CAChB,CAEJ,CAjCD,CAkCH,CAnCD,EAoCA,QAASE,CAAAA,CAAT,CAA8BC,CAA9B,CAAqC,CAEjC,OADIC,CAAAA,CAAG,CAAG,EACV,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,CAApB,CAA2BE,CAAC,EAA5B,CAAgC,CAC5BD,CAAG,q9BAGN,CACD,MAAOA,CAAAA,CACV,CACD,QAASH,CAAAA,CAAT,CAAuBR,CAAvB,CAA+BO,CAA/B,CAAqC,CAajC,GAAI,CACAZ,CAAI,CAACkB,IAAL,CAAU,CANA,CACVC,UAAU,+BADA,CAEVC,IAAI,CAPK,CACT,KAAQR,CADC,CAET,OAAUP,CAFD,CAKC,CAMA,CAAV,EAAqB,CAArB,EAAwBgB,IAAxB,CAA6B,SAAUC,CAAV,CAAgB,CAEzC,GAAIf,CAAAA,CAAI,CAAG,EAAX,CAEA,GAAoB,SAAhB,GAAAe,CAAI,CAACC,MAAT,CAA+B,CAC3BC,OAAO,CAACC,GAAR,CAAYH,CAAI,CAACI,YAAjB,EACAF,OAAO,CAACC,GAAR,CAAYH,CAAI,CAACK,OAAjB,EACAL,CAAI,CAACI,YAAL,CAAkBE,OAAlB,CAA0B,SAAUC,CAAV,CAAuB,CAE7CtB,CAAI,EAAI,mBAAiBsB,CAAW,CAACC,SAA7B,CAAuC,UAA/C,CAEAR,CAAI,CAACK,OAAL,CAAaC,OAAb,CAAqB,SAAUG,CAAV,CAAiB,CAClC,GAAIA,CAAM,CAACC,cAAP,GAA0BH,CAAW,CAACG,cAA1C,CAAyD,CAErDR,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBM,CAAtB,EACAxB,CAAI,EAAI,iGAE6BwB,CAAM,CAACE,IAFpC,CAEyC,YAFzC,CAEwDnB,CAAoB,CAACiB,CAAM,CAACG,KAAR,CAF5E,qCAKX,CAGJ,CAZD,CAcH,CAlBD,EAmBApC,CAAC,CAAC,oBAAD,CAAD,CAAwBS,IAAxB,CAA6BA,CAA7B,CAEH,CAxBD,IAwBO,CAEHR,CAAY,CAACoC,eAAb,CAA6B,CACzBC,OAAO,CAAE,iBADgB,CAEzBC,IAAI,CAAE,OAFmB,CAA7B,CAIH,CACJ,CAnCD,EAmCGC,IAnCH,CAmCQvC,CAAY,CAACwC,SAnCrB,CAoCH,CAAC,MAAOC,CAAP,CAAU,CACR,QACH,CAEJ,CAED,QAAS1B,CAAAA,CAAT,CAA8BC,CAA9B,CAAqC,CAEjC,OADIC,CAAAA,CAAG,CAAG,EACV,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,CAApB,CAA2BE,CAAC,EAA5B,CAAgC,CAC5BD,CAAG,q9BAGN,CACD,MAAOA,CAAAA,CACV,CACJ,CAhHE,CAmHV,CApHK,CAAN","sourcesContent":["define(['jquery', 'core/notification', 'core/ajax'], function ($, notification, ajax) {\n    return {\n        init: function () {\n            $(document).ready(function () {\n                $('#select_user_result').on('change', function () {\n                    var userid = $('#select_user_result').val();\n                    if (!userid){\n                        $('#user_rating').html('');\n                        $('#criteria_render').html('');\n                        $('#all_result_render').html('');\n\n                        if(!$('#assessment_form').hasClass('d-none')){\n                            $('#assessment_form').addClass('d-none');\n                        }\n                        if ($('#select_user option:selected')){\n                            $('#select_user').val(\"\");\n                        }\n                        alert('Please select a valid user to show data');\n                    }\n                    else {\n                        if(!$('#assessment_form').hasClass('d-none')){\n                            $('#assessment_form').addClass('d-none');\n\n                        }\n                        $('#all_result_render').removeClass('d-none');\n\n                        if ($('#select_user option:selected')){\n                            $('#select_user').val(\"\");\n                        }\n                        var cmid = $('#courseid').val();\n                        $('#user_rating').html('');\n                        $('#criteria_render').html('');\n                        // $('#assessment_form').removeClass('d-none');\n                        $('#all_result_render').html('');\n                        render_result(userid, cmid);\n                    }\n\n                });\n            });\n            function generate_rating_star(stars) {\n                var htm = '';\n                for (var i = 0; i < stars; i++) {\n                    htm += '<svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">' +\n                        '<path d=\"M3.58266 18.5634C3.48541 19.1178 4.03237 19.5517 4.51542 19.3034L10.002 16.4835L15.4885 19.3034C15.9715 19.5517 16.5185 19.1178 16.4212 18.5634L15.3841 12.6516L19.787 8.45578C20.1985 8.06366 19.9855 7.34671 19.4342 7.2684L13.3111 6.39856L10.581 0.990381C10.3351 0.503206 9.66885 0.503206 9.42291 0.990381L6.69276 6.39856L0.569668 7.2684C0.0184315 7.34671 -0.194569 8.06366 0.216907 8.45578L4.61982 12.6516L3.58266 18.5634ZM9.71342 15.1033L5.10623 17.4712L5.97405 12.5246C6.01495 12.2915 5.93803 12.0527 5.77061 11.8931L2.13706 8.4305L7.20245 7.71092C7.41184 7.68117 7.59468 7.54743 7.69346 7.35176L10.002 2.77884L12.3104 7.35176C12.4092 7.54743 12.5921 7.68117 12.8015 7.71092L17.8668 8.4305L14.2333 11.8931C14.0659 12.0527 13.989 12.2915 14.0299 12.5246L14.8977 17.4712L10.2905 15.1033C10.1085 15.0097 9.89541 15.0097 9.71342 15.1033Z\" fill=\"#9CA4B6\"/>' +\n                        '</svg>';\n                }\n                return htm;\n            }\n            function render_result(userid, cmid) {\n\n                var wsfunction = 'interview_assessment_results';\n                var params = {\n                    'cmid': cmid,\n                    'userid': userid\n                };\n\n                var request = {\n                    methodname: wsfunction,\n                    args: params\n                };\n\n                try {\n                    ajax.call([request])[0].done(function (data) {\n\n                        var html = '';\n\n                        if (data.result === 'success') {\n                            console.log(data.interviewers);\n                            console.log(data.reviews);\n                            data.interviewers.forEach(function (interviewer) {\n\n                                html += '<label for=\"\">'+interviewer.firstname+'</label>';\n\n                                data.reviews.forEach(function (review){\n                                    if (review.interviewer_id === interviewer.interviewer_id){\n\n                                        console.log('review', review);\n                                        html += '<div class=\"col-md-4\">\\n' +\n                                            '            <div class=\"rating\">\\n' +\n                                            '                <label for=\"\">'+review.name+'</label>\\n' + generate_rating_star(review.grade) +\n                                            '            </div>\\n' +\n                                            '        </div>';\n                                    }\n\n\n                                });\n\n                            });\n                            $('#all_result_render').html(html);\n\n                        } else {\n\n                            notification.addNotification({\n                                message: 'No Result Found',\n                                type: 'error'\n                            });\n                        }\n                    }).fail(notification.exception);\n                } catch (e) {\n                    return false;\n                }\n\n            }\n\n            function generate_rating_star(stars) {\n                var htm = '';\n                for (var i = 0; i < stars; i++) {\n                    htm += '<svg width=\"21\" height=\"20\" viewBox=\"0 0 21 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">' +\n                        '<path d=\"M3.58266 18.5634C3.48541 19.1178 4.03237 19.5517 4.51542 19.3034L10.002 16.4835L15.4885 19.3034C15.9715 19.5517 16.5185 19.1178 16.4212 18.5634L15.3841 12.6516L19.787 8.45578C20.1985 8.06366 19.9855 7.34671 19.4342 7.2684L13.3111 6.39856L10.581 0.990381C10.3351 0.503206 9.66885 0.503206 9.42291 0.990381L6.69276 6.39856L0.569668 7.2684C0.0184315 7.34671 -0.194569 8.06366 0.216907 8.45578L4.61982 12.6516L3.58266 18.5634ZM9.71342 15.1033L5.10623 17.4712L5.97405 12.5246C6.01495 12.2915 5.93803 12.0527 5.77061 11.8931L2.13706 8.4305L7.20245 7.71092C7.41184 7.68117 7.59468 7.54743 7.69346 7.35176L10.002 2.77884L12.3104 7.35176C12.4092 7.54743 12.5921 7.68117 12.8015 7.71092L17.8668 8.4305L14.2333 11.8931C14.0659 12.0527 13.989 12.2915 14.0299 12.5246L14.8977 17.4712L10.2905 15.1033C10.1085 15.0097 9.89541 15.0097 9.71342 15.1033Z\" fill=\"#9CA4B6\"/>' +\n                        '</svg>';\n                }\n                return htm;\n            }\n        }\n\n    };\n});"],"file":"userresult.min.js"}